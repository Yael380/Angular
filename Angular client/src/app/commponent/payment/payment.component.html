<link href="https://unpkg.com/primeflex/primeflex.css" rel="stylesheet" />

<div class="card flex justify-center">
    <!-- <p-button (click)="showDialog()" label="Show" /> -->
    <p-dialog header="Edit Profile" [(visible)]="visible" [style]="{ width: '25rem' }" (onHide)="closeDialogPayment()">
        <span class="p-text-secondary block mb-6">Update your information.</span>
        
        <!-- Name Field -->
        <div class="flex items-center gap-4">
            <label for="name" class="font-semibold w-24">Name</label>
            <input pInputText id="name" class="flex-auto" [(ngModel)]="user.name" autocomplete="off"
                #name="ngModel" required />
        </div>
        <div class="mb-4">
            <small class="text-red-500" *ngIf="name?.errors?.['required']">Name is required.</small>
        </div>
        
        <!-- Email Field -->
        <div class="flex items-center gap-4">
            <label for="email" class="font-semibold w-24">Email</label>
            <input pInputText id="email" class="flex-auto" autocomplete="off" [(ngModel)]="user.email" #email="ngModel" email required />
        </div>
        <div class="mb-4">
            <div class="text-red-500 error-message" *ngIf="email?.errors?.['required']">Email is required.</div>
            <small class="text-red-500 error-message" *ngIf="email?.errors?.['email']">Please enter a valid email address.</small>
        </div>
        
        <!-- Phone Field -->
        <div class="flex items-center gap-4 mb-2">
            <label for="phone" class="font-semibold w-24">Phone</label>
            <input pInputText id="phone" class="flex-auto" [(ngModel)]="user.phone" autocomplete="off" />
        </div>
        
        <!-- Credit Card Section -->
        <!-- <span class="p-text-secondary block mb-2">Credit Card Details</span> -->
        
        <!-- Card Number -->
        <div class="flex items-center gap-4">
            <label for="cardNumber" class="font-semibold w-24">Card Number</label>
            <input pInputText id="cardNumber" class="flex-auto" [(ngModel)]="payment.cardNumber" autocomplete="off" 
                #cardNumber="ngModel" required maxlength="16" minlength="16" />
        </div>
        <div class="mb-4">
            <small class="text-red-500" *ngIf="cardNumber?.errors?.['required']">Card Number is required.</small>
            <small class="text-red-500" *ngIf="cardNumber?.errors?.['minlength']">Card Number must be 16 digits.</small>
        </div>
        
        <!-- Expiry Date -->
        <div class="flex items-center gap-4">
            <label for="expiryDate" class="font-semibold w-24">Expiry Date</label>
            <input pInputText id="expiryDate" class="flex-auto" [(ngModel)]="payment.expiryDate" autocomplete="off"
                placeholder="MM/YY" #expiryDate="ngModel" required pattern="^(0[1-9]|1[0-2])\/?([0-9]{2})$" />
        </div>
        <div class="mb-4">
            <small class="text-red-500" *ngIf="expiryDate?.errors?.['required']">Expiry Date is required.</small>
            <small class="text-red-500" *ngIf="expiryDate?.errors?.['pattern']">Enter a valid expiry date (MM/YY).</small>
        </div>
        
        <!-- CVV -->
        <div class="flex items-center gap-4">
            <label for="cvv" class="font-semibold w-24">CVV</label>
            <input pInputText id="cvv" class="flex-auto" [(ngModel)]="payment.cvv" autocomplete="off" 
                maxlength="3" minlength="3" #cvv="ngModel" required />
        </div>
        <!-- type="password" -->
        <div class="mb-4">
            <small class="text-red-500" *ngIf="cvv?.errors?.['required']">CVV is required.</small>
            <small class="text-red-500" *ngIf="cvv?.errors?.['minlength']">CVV must be 3 digits.</small>
        </div>
        
        <!-- Action Buttons -->
        <div class="flex justify-end gap-2">
            <p-button label="Cancel" severity="secondary" (click)="closeDialogPayment()" />
            <p-button label="Save" (click)="saveOrder()" severity="contrast" />
        </div>
    </p-dialog>
</div>
